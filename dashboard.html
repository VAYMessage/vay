<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Dashboard â€” VAY ID</title>

  <link rel="stylesheet" href="/css/base.css">
  <link rel="stylesheet" href="/css/layout.css">
  <link rel="stylesheet" href="/css/components.css">
  <link rel="stylesheet" href="/css/notification-center.css">
  <link rel="stylesheet" href="/css/badge.css">
  <link rel="stylesheet" href="/css/animations.css">
</head>
<body class="theme-frost">

<div class="container page">

  <div class="header">
    <h2>Dashboard</h2>

    <div style="position:relative;">
      <button class="button" onclick="toggleNotificationCenter()">
        ðŸ””
      </button>
      <div id="badge" class="badge hidden">0</div>
    </div>

    <button class="button" style="background:#333;" onclick="logout()">Ð’Ñ‹Ð¹Ñ‚Ð¸</button>
  </div>

  <br>

  <div class="card">
    <h3>Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ</h3>
    <p id="userEmail"></p>
  </div>

</div>

<div id="notificationCenter" class="notification-center"></div>

<script type="module">
import { listenAuth, logout } from "/js/core/auth.js";
import { initPush } from "/js/notifications/push.js";
import { initNotificationCenter, toggleNotificationCenter } from "/js/notifications/notification-center.js";
import { updateBadge } from "/js/ui/badge.js";

listenAuth(user => {
  if (!user) {
    window.location.href = "/";
    return;
  }

  document.getElementById("userEmail").innerText = user.email;
  initPush(user);
  initNotificationCenter(user);
  updateBadge(user.uid);
});

window.logout = logout;
window.toggleNotificationCenter = toggleNotificationCenter;
</script>

</body>
</html>